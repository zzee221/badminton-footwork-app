# æ•°æ®åº“åŒ–ç®¡ç†åŠŸèƒ½éƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ¦‚è¿°
æœ¬åŠŸèƒ½å°†åŸæœ‰çš„æ–‡ä»¶é…ç½®æ–¹å¼æ”¹ä¸ºæ•°æ®åº“ç®¡ç†æ–¹å¼ï¼Œè®©ä½ å¯ä»¥é€šè¿‡ Supabase Dashboard ç›´è§‚åœ°ç®¡ç†æ­¥ä¼æ•°æ®ã€‚

## ğŸ—‚ï¸ æ–°å¢æ–‡ä»¶

### æ•°æ®åº“ç›¸å…³
- `database-step-management.sql` - æ­¥ä¼æ•°æ®è¡¨ç»“æ„
- `migration-step-data.sql` - æ•°æ®è¿ç§»è„šæœ¬

### ç¨‹åºæ–‡ä»¶
- `database-step-config.js` - æ•°æ®åº“æ­¥ä¼é…ç½®ç®¡ç†ç±»
- `script-database.js` - æ•°æ®åº“ç‰ˆæœ¬ä¸»ç¨‹åº

### ä¿®æ”¹çš„æ–‡ä»¶
- `index.html` - æ›´æ–°è„šæœ¬å¼•ç”¨

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. æ•°æ®åº“åˆå§‹åŒ–
åœ¨ Supabase SQL ç¼–è¾‘å™¨ä¸­æŒ‰é¡ºåºæ‰§è¡Œï¼š

```sql
-- 1. åˆ›å»ºè¡¨ç»“æ„
-- å¤åˆ¶ database-step-management.sql çš„å†…å®¹æ‰§è¡Œ

-- 2. è¿ç§»ç°æœ‰æ•°æ®
-- å¤åˆ¶ migration-step-data.sql çš„å†…å®¹æ‰§è¡Œ
```

### 2. éªŒè¯æ•°æ®å¯¼å…¥
æ‰§è¡Œè¿ç§»è„šæœ¬åï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

```sql
-- æ£€æŸ¥æ•°æ®æ˜¯å¦æ­£ç¡®å¯¼å…¥
SELECT * FROM step_statistics;

-- æ£€æŸ¥æ­¥ä¼è¯¦æƒ…
SELECT * FROM step_details LIMIT 5;
```

### 3. éƒ¨ç½²åˆ° Netlify
ç”±äºæˆ‘ä»¬åœ¨ `feature/database-management` åˆ†æ”¯å¼€å‘ï¼Œæœ‰ä¸¤ç§éƒ¨ç½²æ–¹å¼ï¼š

#### æ–¹å¼Aï¼šæµ‹è¯•éƒ¨ç½²ï¼ˆæ¨èï¼‰
```bash
# æ¨é€åˆ†æ”¯åˆ° GitHub
git push origin feature/database-management

# åœ¨ Netlify ä¸­ï¼š
# 1. åˆ›å»ºæ–°çš„éƒ¨ç½²ç«™ç‚¹æˆ–åˆ†æ”¯éƒ¨ç½²
# 2. é€‰æ‹© feature/database-management åˆ†æ”¯
# 3. æµ‹è¯•åŠŸèƒ½æ­£å¸¸åå†åˆå¹¶åˆ°ä¸»åˆ†æ”¯
```

#### æ–¹å¼Bï¼šç›´æ¥éƒ¨ç½²åˆ°ç”Ÿäº§
```bash
# åˆå¹¶åˆ°ä¸»åˆ†æ”¯
git checkout main
git merge feature/database-management
git push origin main
```

### 4. åŠŸèƒ½éªŒè¯
éƒ¨ç½²åéªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **æ­¥ä¼ç±»å‹é€‰æ‹©** - åº”è¯¥æ˜¾ç¤ºæ•°æ®åº“ä¸­çš„ç±»å‹
2. **æ­¥ä¼åˆ—è¡¨** - æ­£ç¡®æ˜¾ç¤ºæ­¥ä¼æ•°æ®
3. **è§†é¢‘æ’­æ”¾** - ç‚¹å‡»ç‚¹ä½èƒ½æ­£å¸¸æ’­æ”¾è§†é¢‘
4. **æƒé™æ§åˆ¶** - å…è´¹/ä»˜è´¹å†…å®¹æƒé™æ­£ç¡®

## ğŸ¯ ç®¡ç†ç•Œé¢ä½¿ç”¨

### Supabase Dashboard ç®¡ç†
ç™»å½• Supabase Dashboardï¼Œè¿›å…¥ `Table Editor`ï¼š

#### ç®¡ç†æ­¥ä¼ç±»å‹
1. é€‰æ‹© `step_types` è¡¨
2. å¯ä»¥æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤æ­¥ä¼ç±»å‹
3. ä¿®æ”¹ `name` å’Œ `description` å­—æ®µ

#### ç®¡ç†æ­¥ä¼ç»„åˆ
1. é€‰æ‹© `step_combinations` è¡¨
2. ä¿®æ”¹æ­¥ä¼åç§°å’Œè¯´æ˜
3. è°ƒæ•´ `is_free` å­—æ®µæ§åˆ¶ä»˜è´¹ç­–ç•¥
4. ä¿®æ”¹ `display_order` è°ƒæ•´æ˜¾ç¤ºé¡ºåº

#### ç®¡ç†æ­¥ä¼æ¨¡å¼
1. é€‰æ‹© `step_patterns` è¡¨
2. æ·»åŠ æ–°çš„æ­¥ä¼æ¨¡å¼
3. è®¾ç½®æ¨¡å¼çº§åˆ«çš„æƒé™æ§åˆ¶

#### ç®¡ç†è§†é¢‘æ–‡ä»¶
1. é€‰æ‹© `step_videos` è¡¨
2. æ·»åŠ æ–°çš„è§†é¢‘æ–‡ä»¶
3. ä¿®æ”¹è§†é¢‘è·¯å¾„å’Œåç§°

### å¸¸ç”¨ç®¡ç†æ“ä½œ

#### æ·»åŠ æ–°æ­¥ä¼
1. åœ¨ `step_combinations` è¡¨æ·»åŠ æ–°è®°å½•
2. åœ¨ `step_patterns` è¡¨æ·»åŠ å¯¹åº”æ¨¡å¼
3. åœ¨ `step_videos` è¡¨æ·»åŠ è§†é¢‘æ–‡ä»¶

#### ä¿®æ”¹è¯´æ˜æ–‡å­—
```sql
-- ä¿®æ”¹æ­¥ä¼ç»„åˆè¯´æ˜
UPDATE step_combinations 
SET description = 'æ–°çš„è¯´æ˜æ–‡å­—'
WHERE sequence = '1-2';

-- ä¿®æ”¹æ¨¡å¼è¯´æ˜
UPDATE step_patterns 
SET description = 'æ¨¡å¼è¯´æ˜'
WHERE name = 'åŸºç¡€æ­¥ä¼';
```

#### è°ƒæ•´ä»˜è´¹ç­–ç•¥
```sql
-- è®¾ç½®ä¸ºå…è´¹
UPDATE step_combinations 
SET is_free = true
WHERE sequence = '1-2';

-- è®¾ç½®ä¸ºä»˜è´¹
UPDATE step_combinations 
SET is_free = false
WHERE sequence = '1-6';
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ•°æ®åŠ è½½å¤±è´¥
- æ£€æŸ¥ Supabase è¿æ¥é…ç½®
- ç¡®è®¤æ•°æ®åº“è¡¨å·²åˆ›å»º
- æŸ¥çœ‹ RLS ç­–ç•¥è®¾ç½®

#### 2. è§†é¢‘æ— æ³•æ’­æ”¾
- æ£€æŸ¥è§†é¢‘æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
- ç¡®è®¤è§†é¢‘æ–‡ä»¶å­˜åœ¨
- æ£€æŸ¥æ–‡ä»¶æƒé™

#### 3. æƒé™æ§åˆ¶å¼‚å¸¸
- æ£€æŸ¥ `is_free` å­—æ®µè®¾ç½®
- ç¡®è®¤ç”¨æˆ·ç™»å½•çŠ¶æ€
- éªŒè¯ä¼šå‘˜æƒé™

### è°ƒè¯•æ–¹æ³•

#### æµè§ˆå™¨æ§åˆ¶å°
```javascript
// æ£€æŸ¥æ­¥ä¼æ•°æ®
window.databaseStepConfig.getStepTypes().then(console.log);

// æ£€æŸ¥ç‰¹å®šæ­¥ä¼é…ç½®
window.databaseStepConfig.getStepConfig('parallel').then(console.log);
```

#### æ•°æ®åº“æŸ¥è¯¢
```sql
-- æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
SELECT 
    st.name as type_name,
    sc.sequence,
    sc.name as combination_name,
    sp.name as pattern_name,
    sv.video_name
FROM step_types st
LEFT JOIN step_combinations sc ON st.id = sc.step_type_id
LEFT JOIN step_patterns sp ON sc.id = sp.combination_id
LEFT JOIN step_videos sv ON sp.id = sv.pattern_id
ORDER BY st.display_order, sc.display_order, sp.display_order;
```

## ğŸ‰ åç»­ä¼˜åŒ–

### è®¡åˆ’ä¸­çš„åŠŸèƒ½
1. **ç®¡ç†ç•Œé¢** - ä¸“é—¨çš„ç®¡ç†é¡µé¢
2. **æ‰¹é‡æ“ä½œ** - æ‰¹é‡å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½
3. **æ•°æ®éªŒè¯** - é˜²æ­¢é”™è¯¯é…ç½®
4. **ç‰ˆæœ¬æ§åˆ¶** - é…ç½®å˜æ›´å†å²

### æ³¨æ„äº‹é¡¹
1. é¦–æ¬¡éƒ¨ç½²å»ºè®®åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯
2. ä¿®æ”¹æ•°æ®å‰å»ºè®®å¤‡ä»½
3. æ³¨æ„è§†é¢‘æ–‡ä»¶çš„è·¯å¾„æ­£ç¡®æ€§
4. å®šæœŸæ£€æŸ¥æ•°æ®å®Œæ•´æ€§

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. Supabase æ—¥å¿—
3. ç½‘ç»œè¿æ¥çŠ¶æ€
4. æ•°æ®åº“è¡¨ç»“æ„å®Œæ•´æ€§